[patterns]
twoEqualDateLegs = legs.get(0).optionConfig.expiryDate.compareTo(legs.get(1).optionConfig.expiryDate) == 0 
shortSpreadEvenLegsMargin = legs.get(0).optionConfig.strikePrice.subtract(legs.get(1).optionConfig.strikePrice).abs().multiply(legs.get(1).optionRoot.multiplier).multiply(strategyQuantity)
threeEvenStrikeLegs = legs.get(0).optionConfig.strikePrice.subtract(legs.get(1).optionConfig.strikePrice).compareTo( legs.get(1).optionConfig.strikePrice.subtract(legs.get(2).optionConfig.strikePrice) ) == 0 
threeEqualDateLegs = legs.get(0).optionConfig.expiryDate.compareTo(legs.get(1).optionConfig.expiryDate) == 0 && legs.get(1).optionConfig.expiryDate.compareTo(legs.get(2).optionConfig.expiryDate) == 0 
fourEvenWings = legs.get(0).optionConfig.strikePrice.subtract(legs.get(1).optionConfig.strikePrice).compareTo( legs.get(2).optionConfig.strikePrice.subtract(legs.get(3).optionConfig.strikePrice) ) == 0 
fourEqualDateLegs = legs.get(0).optionConfig.expiryDate.compareTo(legs.get(1).optionConfig.expiryDate) == 0 && legs.get(1).optionConfig.expiryDate.compareTo(legs.get(2).optionConfig.expiryDate) == 0 && legs.get(2).optionConfig.expiryDate.compareTo(legs.get(3).optionConfig.expiryDate) == 0 

[strategyGroup/core]
strategies = CallButterflyLong, CallButterflyShort, PutButterflyLong, PutButterflyShort, IronButterflyLong, IronButterflyShort, CallVerticalLong, PutVerticalLong, CallVerticalShort, PutVerticalShort
sort = sort1

IronButterflyLong.legs = shortPuts,longPuts,longCalls,shortCalls
IronButterflyLong.legsRatio = 1,1,1,1
IronButterflyLong.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) < 0 
IronButterflyLong.pattern = legs.get(1).optionConfig.strikePrice.compareTo(legs.get(2).optionConfig.strikePrice) == 0 
IronButterflyLong.pattern = legs.get(2).optionConfig.strikePrice.compareTo(legs.get(3).optionConfig.strikePrice) < 0 
IronButterflyLong.pattern = ${patterns/fourEvenWings}
IronButterflyLong.pattern = ${patterns/fourEqualDateLegs}
IronButterflyLong.margin = zero

IronButterflyShort.legs = longPuts,shortPuts,shortCalls,longCalls
IronButterflyShort.legsRatio = 1,1,1,1
IronButterflyShort.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) < 0 
IronButterflyShort.pattern = legs.get(1).optionConfig.strikePrice.compareTo(legs.get(2).optionConfig.strikePrice) == 0 
IronButterflyShort.pattern = legs.get(2).optionConfig.strikePrice.compareTo(legs.get(3).optionConfig.strikePrice) < 0 
IronButterflyShort.pattern = ${patterns/fourEvenWings}
IronButterflyShort.pattern = ${patterns/fourEqualDateLegs}
IronButterflyShort.margin = ${patterns/shortSpreadEvenLegsMargin}

CallButterflyLong.legs = longCalls,shortCalls,longCalls
CallButterflyLong.legsRatio = 1,2,1
CallButterflyLong.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) < 0 
CallButterflyLong.pattern = legs.get(1).optionConfig.strikePrice.compareTo(legs.get(2).optionConfig.strikePrice) < 0 
CallButterflyLong.pattern = ${patterns/threeEvenStrikeLegs}
CallButterflyLong.pattern = ${patterns/threeEqualDateLegs}
CallButterflyLong.margin = zero

CallButterflyLong.legs = longCalls,shortCalls,longCalls
CallButterflyLong.legsRatio = 1,2,1
CallButterflyLong.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) < 0 
CallButterflyLong.pattern = legs.get(1).optionConfig.strikePrice.compareTo(legs.get(2).optionConfig.strikePrice) < 0 
CallButterflyLong.pattern = ${patterns/threeEvenStrikeLegs}
CallButterflyLong.pattern = ${patterns/threeEqualDateLegs}
CallButterflyLong.margin = zero

CallButterflyShort.legs = shortCalls,longCalls,shortCalls
CallButterflyShort.legsRatio = 1,2,1
CallButterflyShort.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) < 0 
CallButterflyShort.pattern = legs.get(1).optionConfig.strikePrice.compareTo(legs.get(2).optionConfig.strikePrice) < 0 
CallButterflyShort.pattern = ${patterns/threeEvenStrikeLegs}
CallButterflyShort.pattern = ${patterns/threeEqualDateLegs}
CallButterflyShort.margin = ${patterns/shortSpreadEvenLegsMargin}

PutButterflyLong.legs = longPuts,shortPuts,longPuts
PutButterflyLong.legsRatio = 1,2,1
PutButterflyLong.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) > 0 
PutButterflyLong.pattern = legs.get(1).optionConfig.strikePrice.compareTo(legs.get(2).optionConfig.strikePrice) > 0 
PutButterflyLong.pattern = ${patterns/threeEvenStrikeLegs}
PutButterflyLong.pattern = ${patterns/threeEqualDateLegs}
PutButterflyLong.margin = zero

PutButterflyShort.legs = shortPuts,longPuts,shortPuts
PutButterflyShort.legsRatio = 1,2,1
PutButterflyShort.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) > 0 
PutButterflyShort.pattern = legs.get(1).optionConfig.strikePrice.compareTo(legs.get(2).optionConfig.strikePrice) > 0 
PutButterflyShort.pattern = ${patterns/threeEvenStrikeLegs}
PutButterflyShort.pattern = ${patterns/threeEqualDateLegs}
PutButterflyShort.margin = ${patterns/shortSpreadEvenLegsMargin}

CallVerticalShort.legs = longCalls,shortCalls
CallVerticalShort.legsRatio = 1,1
CallVerticalShort.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) > 0 
CallVerticalShort.pattern = ${patterns/twoEqualDateLegs}
CallVerticalShort.margin = ${patterns/shortSpreadEvenLegsMargin}

PutVerticalShort.legs = longPuts,shortPuts
PutVerticalShort.legsRatio = 1,1
PutVerticalShort.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) < 0
PutVerticalShort.pattern = ${patterns/twoEqualDateLegs}
PutVerticalShort.margin = ${patterns/shortSpreadEvenLegsMargin}

CallVerticalLong.legs = longCalls,shortCalls
CallVerticalLong.legsRatio = 1,1
CallVerticalLong.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) <= 0
CallVerticalLong.pattern = ${patterns/twoEqualDateLegs}
CallVerticalLong.margin = zero

PutVerticalLong.legs = longPuts,shortPuts
PutVerticalLong.legsRatio = 1,1
PutVerticalLong.pattern = legs.get(0).optionConfig.strikePrice.compareTo(legs.get(1).optionConfig.strikePrice) >= 0
PutVerticalLong.pattern = ${patterns/twoEqualDateLegs}
PutVerticalLong.margin = zero
